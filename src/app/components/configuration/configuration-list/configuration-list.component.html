<div class="search-form">
    <form [formGroup]="form" (ngSubmit)="onFilter()" #formDir="ngForm">
        <mat-form-field class="search-field">
            <mat-label>Key Name:</mat-label>
            <input id="searchKeyName" name="searchKeyName" formControlName="searchKeyName" matInput>
        </mat-form-field>
        <mat-form-field class="search-field">
            <mat-label>Application Name:</mat-label>
            <input id="searchApplicationName" name="searchApplicationName" formControlName="searchApplicationName"
                matInput>
        </mat-form-field>
        <div class="search-btn">
            <button [disabled]="!form.valid" mat-fab>
                <mat-icon fontIcon="search"></mat-icon>
            </button>
        </div>
        <div class="action-btn">
            <button mat-button (click)="getData()" type="reset">Reset</button>
            <button type="button" (click)="openAddSettingDialog()" mat-flat-button>Add Settings</button>
        </div>
    </form>
    @if (isFormTouchAndDirty() && getFormErrorMessage() !== '') {
    <div class="search-error">
        <mat-error>{{ getFormErrorMessage() }}</mat-error>
    </div>
    }
</div>
<div class="setting-list">
    <table mat-table matSort (matSortChange)="announceSortChange($event)" [dataSource]="dataSource"
        class="mat-elevation-z8 setting-table">
        <!-- Key name Column -->
        <ng-container matColumnDef="key">
            <th mat-sort-header sortActionDescription="Sort by number" mat-header-cell *matHeaderCellDef>Key Name</th>
            <td mat-cell *matCellDef="let element">{{element.key}}</td>
        </ng-container>

        <!-- Value Column -->
        <ng-container matColumnDef="value">
            <th mat-sort-header sortActionDescription="Sort by number" mat-header-cell *matHeaderCellDef>Value</th>
            <td mat-cell *matCellDef="let element">{{element.value}}</td>
        </ng-container>

        <!-- Application Name Column -->
        <ng-container matColumnDef="applicationName">
            <th mat-sort-header sortActionDescription="Sort by number" mat-header-cell *matHeaderCellDef>Application
                Name
            </th>
            <td mat-cell *matCellDef="let element">{{element.applicationName}}</td>
        </ng-container>

        <!-- Version Column -->
        <ng-container matColumnDef="versionNumber">
            <th mat-sort-header sortActionDescription="Sort by number" mat-header-cell *matHeaderCellDef>Version</th>
            <td mat-cell *matCellDef="let element">{{element.versionNumber}}</td>
        </ng-container>

        <!-- Last modified Column -->
        <ng-container matColumnDef="lastModifiedOn">
            <th mat-sort-header sortActionDescription="Sort by number" mat-header-cell *matHeaderCellDef>Modified On
            </th>
            <td mat-cell *matCellDef="let element">{{element.lastModifiedOn | date: 'MM/dd/yyyy'}}</td>
        </ng-container>

        <!-- Action Column -->
        <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef>Action</th>
            <td mat-cell *matCellDef="let element">
                <mat-icon (click)="onEdit(element.id)" fontIcon="edit"></mat-icon>
                <mat-icon (click)="onDelete(element.id)" fontIcon="delete"></mat-icon>
            </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
</div>
<mat-paginator [length]="totalItem" [pageSize]="5" (page)="onPageChange($event)" [pageIndex]="pageIndex"
    [pageSizeOptions]="[5]" aria-label="Select page">
</mat-paginator>